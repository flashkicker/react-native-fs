import e from"react-native";import r from"base-64";import o from"utf8";var t=e.NativeModules.RNFSManager,i=new(0,e.NativeEventEmitter)(t),n=t.RNFSFileTypeRegular,a=t.RNFSFileTypeDirectory,s="ios"===e.Platform.OS,l=0,d=()=>l+=1,c=e=>e.startsWith("file://")?e.slice(7):e;function p(e,t,i){var n={encoding:"utf8"};return i&&("string"==typeof i?n.encoding=i:"object"==typeof i&&(n=i)),t(c(e)).then((e=>{var t;if("utf8"===n.encoding)t=o.decode(r.decode(e));else if("ascii"===n.encoding)t=r.decode(e);else{if("base64"!==n.encoding)throw new Error('Invalid encoding type "'+String(n.encoding)+'"');t=e}return t}))}function u(e,r){return r(c(e)).then((e=>e.map((e=>({ctime:e.ctime&&new Date(1e3*e.ctime)||null,mtime:e.mtime&&new Date(1e3*e.mtime)||null,name:e.name,path:e.path,size:e.size,isFile:()=>e.type===n,isDirectory:()=>e.type===a})))))}var f={mkdir:(e,r={})=>t.mkdir(c(e),r).then((()=>{})),moveFile:(e,r,o={})=>t.moveFile(c(e),c(r),o).then((()=>{})),copyFile:(e,r,o={})=>t.copyFile(c(e),c(r),o).then((()=>{})),pathForBundle:e=>t.pathForBundle(e),pathForGroup:e=>t.pathForGroup(e),getFSInfo:()=>t.getFSInfo(),getAllExternalFilesDirs:()=>t.getAllExternalFilesDirs(),unlink:e=>t.unlink(c(e)).then((()=>{})),exists:e=>t.exists(c(e)),stopDownload(e){t.stopDownload(e)},resumeDownload(e){t.resumeDownload(e)},isResumable:e=>t.isResumable(e),stopUpload(e){t.stopUpload(e)},completeHandlerIOS:e=>t.completeHandlerIOS(e),readDir:e=>u(e,t.readDir),readDirAssets(e){if(!t.readDirAssets)throw new Error("readDirAssets is not available on this platform");return u(e,t.readDirAssets)},existsAssets(e){if(!t.existsAssets)throw new Error("existsAssets is not available on this platform");return t.existsAssets(e)},existsRes(e){if(!t.existsRes)throw new Error("existsRes is not available on this platform");return t.existsRes(e)},readdir:e=>f.readDir(c(e)).then((e=>e.map((e=>e.name)))),setReadable:(e,r,o)=>t.setReadable(e,r,o).then((e=>e)),stat:e=>t.stat(c(e)).then((r=>({"path":e,"ctime":new Date(1e3*r.ctime),"mtime":new Date(1e3*r.mtime),"size":r.size,"mode":r.mode,"originalFilepath":r.originalFilepath,isFile:()=>r.type===n,isDirectory:()=>r.type===a}))),readFile:(e,r)=>p(e,t.readFile,r),read(e,i=0,n=0,a){var s={encoding:"utf8"};return a&&("string"==typeof a?s.encoding=a:"object"==typeof a&&(s=a)),t.read(c(e),i,n).then((e=>{var t;if("utf8"===s.encoding)t=o.decode(r.decode(e));else if("ascii"===s.encoding)t=r.decode(e);else{if("base64"!==s.encoding)throw new Error('Invalid encoding type "'+String(s.encoding)+'"');t=e}return t}))},readFileAssets(e,r){if(!t.readFileAssets)throw new Error("readFileAssets is not available on this platform");return p(e,t.readFileAssets,r)},readFileRes(e,r){if(!t.readFileRes)throw new Error("readFileRes is not available on this platform");return p(e,t.readFileRes,r)},hash:(e,r)=>t.hash(c(e),r),copyFileAssets(e,r){if(!t.copyFileAssets)throw new Error("copyFileAssets is not available on this platform");return t.copyFileAssets(c(e),c(r)).then((()=>{}))},copyFileRes(e,r){if(!t.copyFileRes)throw new Error("copyFileRes is not available on this platform");return t.copyFileRes(e,c(r)).then((()=>{}))},copyAssetsFileIOS:(e,r,o,i,n=1,a=1,s="contain")=>t.copyAssetsFileIOS(e,r,o,i,n,a,s),copyAssetsVideoIOS:(e,r)=>t.copyAssetsVideoIOS(e,r),writeFile(e,i,n){var a,s={encoding:"utf8"};if(n&&("string"==typeof n?s.encoding=n:"object"==typeof n&&(s={...s,...n})),"utf8"===s.encoding)a=r.encode(o.encode(i));else if("ascii"===s.encoding)a=r.encode(i);else{if("base64"!==s.encoding)throw new Error('Invalid encoding type "'+s.encoding+'"');a=i}return t.writeFile(c(e),a,s).then((()=>{}))},appendFile(e,i,n){var a,s={encoding:"utf8"};if(n&&("string"==typeof n?s.encoding=n:"object"==typeof n&&(s=n)),"utf8"===s.encoding)a=r.encode(o.encode(i));else if("ascii"===s.encoding)a=r.encode(i);else{if("base64"!==s.encoding)throw new Error('Invalid encoding type "'+s.encoding+'"');a=i}return t.appendFile(c(e),a)},write(e,i,n,a){var s,l={encoding:"utf8"};if(a&&("string"==typeof a?l.encoding=a:"object"==typeof a&&(l=a)),"utf8"===l.encoding)s=r.encode(o.encode(i));else if("ascii"===l.encoding)s=r.encode(i);else{if("base64"!==l.encoding)throw new Error('Invalid encoding type "'+l.encoding+'"');s=i}return void 0===n&&(n=-1),t.write(c(e),s,n).then((()=>{}))},downloadFile(e){if("object"!=typeof e)throw new Error("downloadFile: Invalid value for argument `options`");if("string"!=typeof e.fromUrl)throw new Error("downloadFile: Invalid value for property `fromUrl`");if("string"!=typeof e.toFile)throw new Error("downloadFile: Invalid value for property `toFile`");if(e.headers&&"object"!=typeof e.headers)throw new Error("downloadFile: Invalid value for property `headers`");if(e.background&&"boolean"!=typeof e.background)throw new Error("downloadFile: Invalid value for property `background`");if(e.progressDivider&&"number"!=typeof e.progressDivider)throw new Error("downloadFile: Invalid value for property `progressDivider`");if(e.progressInterval&&"number"!=typeof e.progressInterval)throw new Error("downloadFile: Invalid value for property `progressInterval`");if(e.readTimeout&&"number"!=typeof e.readTimeout)throw new Error("downloadFile: Invalid value for property `readTimeout`");if(e.connectionTimeout&&"number"!=typeof e.connectionTimeout)throw new Error("downloadFile: Invalid value for property `connectionTimeout`");if(e.backgroundTimeout&&"number"!=typeof e.backgroundTimeout)throw new Error("downloadFile: Invalid value for property `backgroundTimeout`");var r=d(),o=[];e.begin&&o.push(i.addListener("DownloadBegin",(o=>{o.jobId===r&&e.begin(o)}))),e.progress&&o.push(i.addListener("DownloadProgress",(o=>{o.jobId===r&&e.progress(o)}))),e.resumable&&o.push(i.addListener("DownloadResumable",(o=>{o.jobId===r&&e.resumable()})));var n={jobId:r,fromUrl:e.fromUrl,toFile:c(e.toFile),headers:e.headers||{},background:!!e.background,progressDivider:e.progressDivider||0,progressInterval:e.progressInterval||0,readTimeout:e.readTimeout||15e3,connectionTimeout:e.connectionTimeout||5e3,backgroundTimeout:e.backgroundTimeout||36e5,hasBeginCallback:e.begin instanceof Function,hasProgressCallback:e.progress instanceof Function,hasResumableCallback:e.resumable instanceof Function};return{jobId:r,promise:t.downloadFile(n).then((e=>(o.forEach((e=>e.remove())),e))).catch((e=>Promise.reject(e)))}},uploadFiles(e){if(!t.uploadFiles)return{jobId:-1,promise:Promise.reject(new Error("`uploadFiles` is unsupported on this platform"))};var r=d(),o=[];if("object"!=typeof e)throw new Error("uploadFiles: Invalid value for argument `options`");if("string"!=typeof e.toUrl)throw new Error("uploadFiles: Invalid value for property `toUrl`");if(!Array.isArray(e.files))throw new Error("uploadFiles: Invalid value for property `files`");if(e.headers&&"object"!=typeof e.headers)throw new Error("uploadFiles: Invalid value for property `headers`");if(e.fields&&"object"!=typeof e.fields)throw new Error("uploadFiles: Invalid value for property `fields`");if(e.method&&"string"!=typeof e.method)throw new Error("uploadFiles: Invalid value for property `method`");return e.begin?o.push(i.addListener("UploadBegin",e.begin)):e.beginCallback&&o.push(i.addListener("UploadBegin",e.beginCallback)),e.progress?o.push(i.addListener("UploadProgress",e.progress)):e.progressCallback&&o.push(i.addListener("UploadProgress",e.progressCallback)),{jobId:r,promise:t.uploadFiles({jobId:r,toUrl:e.toUrl,files:e.files,binaryStreamOnly:e.binaryStreamOnly||!1,headers:e.headers||{},fields:e.fields||{},method:e.method||"POST",hasBeginCallback:e.begin instanceof Function||e.beginCallback instanceof Function,hasProgressCallback:e.progress instanceof Function||e.progressCallback instanceof Function}).then((e=>(o.forEach((e=>e.remove())),e)))}},touch(e,r,o){if(o&&!(o instanceof Date))throw new Error("touch: Invalid value for argument `ctime`");if(r&&!(r instanceof Date))throw new Error("touch: Invalid value for argument `mtime`");var i=0;return s&&(i=o&&o.getTime()),t.touch(c(e),r&&r.getTime(),i)},scanFile:e=>t.scanFile(e),MainBundlePath:t.RNFSMainBundlePath,CachesDirectoryPath:t.RNFSCachesDirectoryPath,ExternalCachesDirectoryPath:t.RNFSExternalCachesDirectoryPath,DocumentDirectoryPath:t.RNFSDocumentDirectoryPath,DownloadDirectoryPath:t.RNFSDownloadDirectoryPath,ExternalDirectoryPath:t.RNFSExternalDirectoryPath,ExternalStorageDirectoryPath:t.RNFSExternalStorageDirectoryPath,TemporaryDirectoryPath:t.RNFSTemporaryDirectoryPath,LibraryDirectoryPath:t.RNFSLibraryDirectoryPath,PicturesDirectoryPath:t.RNFSPicturesDirectoryPath,FileProtectionKeys:t.RNFSFileProtectionKeys};module.exports=f;
export default {};
//# sourceMappingURL=react-native-fs.min.mjs.map
