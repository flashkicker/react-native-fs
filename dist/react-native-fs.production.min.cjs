"use strict";var e=require("react-native"),r=require("base-64"),o=require("utf8");function t(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}var i=t(e),n=t(r),a=t(o),s=i.default.NativeModules.RNFSManager,l=new(0,i.default.NativeEventEmitter)(s),d=s.RNFSFileTypeRegular,c=s.RNFSFileTypeDirectory,u="ios"===i.default.Platform.OS,p=0,f=()=>p+=1,h=e=>e.startsWith("file://")?e.slice(7):e;function g(e,r,o){var t={encoding:"utf8"};return o&&("string"==typeof o?t.encoding=o:"object"==typeof o&&(t=o)),r(h(e)).then((e=>{var r;if("utf8"===t.encoding)r=a.default.decode(n.default.decode(e));else if("ascii"===t.encoding)r=n.default.decode(e);else{if("base64"!==t.encoding)throw new Error('Invalid encoding type "'+String(t.encoding)+'"');r=e}return r}))}function m(e,r){return r(h(e)).then((e=>e.map((e=>({ctime:e.ctime&&new Date(1e3*e.ctime)||null,mtime:e.mtime&&new Date(1e3*e.mtime)||null,name:e.name,path:e.path,size:e.size,isFile:()=>e.type===d,isDirectory:()=>e.type===c})))))}var y={mkdir:(e,r={})=>s.mkdir(h(e),r).then((()=>{})),moveFile:(e,r,o={})=>s.moveFile(h(e),h(r),o).then((()=>{})),copyFile:(e,r,o={})=>s.copyFile(h(e),h(r),o).then((()=>{})),pathForBundle:e=>s.pathForBundle(e),pathForGroup:e=>s.pathForGroup(e),getFSInfo:()=>s.getFSInfo(),getAllExternalFilesDirs:()=>s.getAllExternalFilesDirs(),unlink:e=>s.unlink(h(e)).then((()=>{})),exists:e=>s.exists(h(e)),stopDownload(e){s.stopDownload(e)},resumeDownload(e){s.resumeDownload(e)},isResumable:e=>s.isResumable(e),stopUpload(e){s.stopUpload(e)},completeHandlerIOS:e=>s.completeHandlerIOS(e),readDir:e=>m(e,s.readDir),readDirAssets(e){if(!s.readDirAssets)throw new Error("readDirAssets is not available on this platform");return m(e,s.readDirAssets)},existsAssets(e){if(!s.existsAssets)throw new Error("existsAssets is not available on this platform");return s.existsAssets(e)},existsRes(e){if(!s.existsRes)throw new Error("existsRes is not available on this platform");return s.existsRes(e)},readdir:e=>y.readDir(h(e)).then((e=>e.map((e=>e.name)))),setReadable:(e,r,o)=>s.setReadable(e,r,o).then((e=>e)),stat:e=>s.stat(h(e)).then((r=>({"path":e,"ctime":new Date(1e3*r.ctime),"mtime":new Date(1e3*r.mtime),"size":r.size,"mode":r.mode,"originalFilepath":r.originalFilepath,isFile:()=>r.type===d,isDirectory:()=>r.type===c}))),readFile:(e,r)=>g(e,s.readFile,r),read(e,r=0,o=0,t){var i={encoding:"utf8"};return t&&("string"==typeof t?i.encoding=t:"object"==typeof t&&(i=t)),s.read(h(e),r,o).then((e=>{var r;if("utf8"===i.encoding)r=a.default.decode(n.default.decode(e));else if("ascii"===i.encoding)r=n.default.decode(e);else{if("base64"!==i.encoding)throw new Error('Invalid encoding type "'+String(i.encoding)+'"');r=e}return r}))},readFileAssets(e,r){if(!s.readFileAssets)throw new Error("readFileAssets is not available on this platform");return g(e,s.readFileAssets,r)},readFileRes(e,r){if(!s.readFileRes)throw new Error("readFileRes is not available on this platform");return g(e,s.readFileRes,r)},hash:(e,r)=>s.hash(h(e),r),copyFileAssets(e,r){if(!s.copyFileAssets)throw new Error("copyFileAssets is not available on this platform");return s.copyFileAssets(h(e),h(r)).then((()=>{}))},copyFileRes(e,r){if(!s.copyFileRes)throw new Error("copyFileRes is not available on this platform");return s.copyFileRes(e,h(r)).then((()=>{}))},copyAssetsFileIOS:(e,r,o,t,i=1,n=1,a="contain")=>s.copyAssetsFileIOS(e,r,o,t,i,n,a),copyAssetsVideoIOS:(e,r)=>s.copyAssetsVideoIOS(e,r),writeFile(e,r,o){var t,i={encoding:"utf8"};if(o&&("string"==typeof o?i.encoding=o:"object"==typeof o&&(i={...i,...o})),"utf8"===i.encoding)t=n.default.encode(a.default.encode(r));else if("ascii"===i.encoding)t=n.default.encode(r);else{if("base64"!==i.encoding)throw new Error('Invalid encoding type "'+i.encoding+'"');t=r}return s.writeFile(h(e),t,i).then((()=>{}))},appendFile(e,r,o){var t,i={encoding:"utf8"};if(o&&("string"==typeof o?i.encoding=o:"object"==typeof o&&(i=o)),"utf8"===i.encoding)t=n.default.encode(a.default.encode(r));else if("ascii"===i.encoding)t=n.default.encode(r);else{if("base64"!==i.encoding)throw new Error('Invalid encoding type "'+i.encoding+'"');t=r}return s.appendFile(h(e),t)},write(e,r,o,t){var i,l={encoding:"utf8"};if(t&&("string"==typeof t?l.encoding=t:"object"==typeof t&&(l=t)),"utf8"===l.encoding)i=n.default.encode(a.default.encode(r));else if("ascii"===l.encoding)i=n.default.encode(r);else{if("base64"!==l.encoding)throw new Error('Invalid encoding type "'+l.encoding+'"');i=r}return void 0===o&&(o=-1),s.write(h(e),i,o).then((()=>{}))},downloadFile(e){if("object"!=typeof e)throw new Error("downloadFile: Invalid value for argument `options`");if("string"!=typeof e.fromUrl)throw new Error("downloadFile: Invalid value for property `fromUrl`");if("string"!=typeof e.toFile)throw new Error("downloadFile: Invalid value for property `toFile`");if(e.headers&&"object"!=typeof e.headers)throw new Error("downloadFile: Invalid value for property `headers`");if(e.background&&"boolean"!=typeof e.background)throw new Error("downloadFile: Invalid value for property `background`");if(e.progressDivider&&"number"!=typeof e.progressDivider)throw new Error("downloadFile: Invalid value for property `progressDivider`");if(e.progressInterval&&"number"!=typeof e.progressInterval)throw new Error("downloadFile: Invalid value for property `progressInterval`");if(e.readTimeout&&"number"!=typeof e.readTimeout)throw new Error("downloadFile: Invalid value for property `readTimeout`");if(e.connectionTimeout&&"number"!=typeof e.connectionTimeout)throw new Error("downloadFile: Invalid value for property `connectionTimeout`");if(e.backgroundTimeout&&"number"!=typeof e.backgroundTimeout)throw new Error("downloadFile: Invalid value for property `backgroundTimeout`");var r=f(),o=[];e.begin&&o.push(l.addListener("DownloadBegin",(o=>{o.jobId===r&&e.begin(o)}))),e.progress&&o.push(l.addListener("DownloadProgress",(o=>{o.jobId===r&&e.progress(o)}))),e.resumable&&o.push(l.addListener("DownloadResumable",(o=>{o.jobId===r&&e.resumable()})));var t={jobId:r,fromUrl:e.fromUrl,toFile:h(e.toFile),headers:e.headers||{},background:!!e.background,progressDivider:e.progressDivider||0,progressInterval:e.progressInterval||0,readTimeout:e.readTimeout||15e3,connectionTimeout:e.connectionTimeout||5e3,backgroundTimeout:e.backgroundTimeout||36e5,hasBeginCallback:e.begin instanceof Function,hasProgressCallback:e.progress instanceof Function,hasResumableCallback:e.resumable instanceof Function};return{jobId:r,promise:s.downloadFile(t).then((e=>(o.forEach((e=>e.remove())),e))).catch((e=>Promise.reject(e)))}},uploadFiles(e){if(!s.uploadFiles)return{jobId:-1,promise:Promise.reject(new Error("`uploadFiles` is unsupported on this platform"))};var r=f(),o=[];if("object"!=typeof e)throw new Error("uploadFiles: Invalid value for argument `options`");if("string"!=typeof e.toUrl)throw new Error("uploadFiles: Invalid value for property `toUrl`");if(!Array.isArray(e.files))throw new Error("uploadFiles: Invalid value for property `files`");if(e.headers&&"object"!=typeof e.headers)throw new Error("uploadFiles: Invalid value for property `headers`");if(e.fields&&"object"!=typeof e.fields)throw new Error("uploadFiles: Invalid value for property `fields`");if(e.method&&"string"!=typeof e.method)throw new Error("uploadFiles: Invalid value for property `method`");return e.begin?o.push(l.addListener("UploadBegin",e.begin)):e.beginCallback&&o.push(l.addListener("UploadBegin",e.beginCallback)),e.progress?o.push(l.addListener("UploadProgress",e.progress)):e.progressCallback&&o.push(l.addListener("UploadProgress",e.progressCallback)),{jobId:r,promise:s.uploadFiles({jobId:r,toUrl:e.toUrl,files:e.files,binaryStreamOnly:e.binaryStreamOnly||!1,headers:e.headers||{},fields:e.fields||{},method:e.method||"POST",hasBeginCallback:e.begin instanceof Function||e.beginCallback instanceof Function,hasProgressCallback:e.progress instanceof Function||e.progressCallback instanceof Function}).then((e=>(o.forEach((e=>e.remove())),e)))}},touch(e,r,o){if(o&&!(o instanceof Date))throw new Error("touch: Invalid value for argument `ctime`");if(r&&!(r instanceof Date))throw new Error("touch: Invalid value for argument `mtime`");var t=0;return u&&(t=o&&o.getTime()),s.touch(h(e),r&&r.getTime(),t)},scanFile:e=>s.scanFile(e),MainBundlePath:s.RNFSMainBundlePath,CachesDirectoryPath:s.RNFSCachesDirectoryPath,ExternalCachesDirectoryPath:s.RNFSExternalCachesDirectoryPath,DocumentDirectoryPath:s.RNFSDocumentDirectoryPath,DownloadDirectoryPath:s.RNFSDownloadDirectoryPath,ExternalDirectoryPath:s.RNFSExternalDirectoryPath,ExternalStorageDirectoryPath:s.RNFSExternalStorageDirectoryPath,TemporaryDirectoryPath:s.RNFSTemporaryDirectoryPath,LibraryDirectoryPath:s.RNFSLibraryDirectoryPath,PicturesDirectoryPath:s.RNFSPicturesDirectoryPath,FileProtectionKeys:s.RNFSFileProtectionKeys};module.exports=y;
//# sourceMappingURL=react-native-fs.production.min.cjs.map
